# CSR(Client Side Rendering), SSR(Server Side Rendering)

브라우저에서 동작하는 웹앱을 구분짓는 기준으로 페이지 구조와 랜더링 방식을 꼽을 수 있다.

### SPA, MPA

- SPA(Single Page Application), 하나의 HTML 파일을 기반으로 자바스크립트를 통해 동적으로
화면의 컨텐츠를 제공하는 방식의 웹앱이다.

- MPA(Multiple Page Application), 사용자가 페이지를 요청할때마다 전달받은 HTML 파일과
정적 리소스를 통해 페이지 컨텐츠를 제공하는 방식의 웹앱이다.

일반적으로 랜더링을 클라이언트에서 담당하는 CSR의 경우 SPA 방식을 따르고, 요청에 따라 제공되는
HTML과 정적 리소스를 통해 페이지 컨텐츠를 구성하는 SSR의 경우 MPA 방식을 따르고 있다.

### CSR, SSR

- CSR, 브라우저가 서버로부터 전달받은 단일 HTML 파일과 자바스크립트를 포함한 모든 자원을 통해 사용자 상호작용에
맞춰 동적으로 페이지를 랜더링한다.

![CSR](./images/CSR.png)

- SSR, 서버에서 화면을 구성하는 것처럼 완성된 HTML을 로드하고 인터렉션이 필요한 부분만 자바스크립트를 통해
클라이언트 화면을 구성하는 방식이다. 데이터가 많이 바뀌지 않는다면 아예 정적 페이지로 빌드해두고 서버로부터 전달받을 수 있다.

![SSR](./images/SSR.png)

#### 초기 뷰 로딩 속도 관점

초기 뷰 로딩 속도 관점에서 SSR이 이전 클라이언트 상태를 유지하기 위해 하이드레이션을 거치지 않는 한 최초 구동을 위해
필요한 모든 자원을 전달받는 CSR보다 비교적 빠르다. 

SSR의 경우 빈 HTML 파일에 스크레치부터 시작하는 것이 아니라, 자바스크립트를 통해 동적으로 구성되어야 하는 레이아웃 및
UI를 제외한 나머지는 미리 구성해둘 수 있어 초기 로딩 속도에서 이점이 있다. + FCP, LCP 시간을 줄일 수 있고, 불필요한
CLS를 줄일 수 있다.

SSR의 경우 모든 페이지에 대해 요청을 하기 때문에 서버에 부하가 걸릴 수 있다는 단점이 있지만, 흔히 next처럼 웹 서버를
따로 구축하기 때문에 부하를 분산시킬 수 있다.

#### SEO 관점

CSR의 경우 위에서 언급한 것처럼 초기 마크업 파일은 비어있다. 즉, 검색 엔진 입장에서는 해당 페이지의 메타 데이터나 주요한
태그에 담긴 정보들을 알 수가 없다. (자바스크립트 또한 검색 엔진에서 해석할 수는 없는 일)

반면, 자바스크립트를 통해 동적인 인터렉션이 필요하지 않은 메타 데이터 + 페이지의 주요 컨텐츠가 미리 작성되어 있는 HTML
파일을 전달받는 SSR이 CSR보다 검색 엔진 최적화 측면에서 유리하다.

CSR의 경우, Lambda@edge에서 컨텐츠 요청에 대해 응답을 줄때 크롤링 봇의 GET 요청에 대해 완성된 페이지를 건네는 방식으로
단점을 보완할 수 있다.

### Reference

- https://medium.com/@adamzerner/client-side-rendering-vs-server-side-rendering-a32d2cf3bfcc
- https://github.com/baeharam/Must-Know-About-Frontend/blob/main/Notes/frontend/csr-ssr.md
